# mantis_conn

По возможности достает некоторое количество возможно полезной информации из богомола
и конвертирует к требуемому виду.

## Проверка работоспособности

### Установка Mantis BT
Неподъемная задача, но с ней справится файл для [docker-compose](https://hub.docker.com/r/vimagick/mantisbt/).
Там есть и креды (administrator/root) и то, как нужно выполнить первоначальную настройку.

После попадания на доску можно и нужно создать задач, добавить подзадач и всякое прочее.

### Запуск конвертера

    MANTIS_API=http://localhost:8989/api/soap/mantisconnect.php \
    STORAGE_API=http://storageendpointproviderhere.pls/api/Storage/StoreData \
    java -jar bin/mbt_conn.jar

Эстеты могут заменить вызов пресобранного пакета на `lein run` при наличии [Leiningen](https://leiningen.org/).

### profit

На `STORAGE_API` будут посылаться жсоны раз в 10 секунд. Этот параметр можно изменить как переменную окружения `INTERVAL` в секундах.

## TODO:

1. ~Передача коннекта через переменные окружения~
2. ~Отправка данных в аггрегатор~
3. ~Определять, что именно требуется отправить (ипосибру)~
